{% extends "base_fd4.html" %}

{% block pagetitle %}
Mozilla Reps - Report by {{ pageuser.get_full_name() }} on {{ day }} {{ month }} {{ year }}
{% endblock %}

{% block content %}
<main role="main" class="reports-main">
  <div class="row">
    <div class="large-8 columns">
      <h1>Report by {{ pageuser.get_full_name() }} on {{ day }} {{ month }} {{ year }}</h1>
    </div>
    {% if editable %}
    <!-- Edit report -->
    <div class="large-4 columns align-right hide-for-small">
      <a href="{{ report|get_report_edit_url }}"
         class="small button">Edit report</a>
    </div>
  {% endif %}
  </div>

  <div class="row">
    <div class="large-6 columns">
      <div class="row">
        <div class="large-1 columns">
          <div class="pict-icon large tag"></div>
        </div>
        <div class="large-11 columns">
          <h3>
            <a href="{{ url('profiles_view_profile', user_profile.display_name) }}">
              {{ pageuser.first_name }} {{ pageuser.last_name }}
            </a>
          </h3>
          {% if user == pageuser %}
            <span class="grayed">
              (that's you!)
            </span>
          {% endif %}
          <!-- Activity type -->
          <section class="report-item">
            <h4>What you did</h4>
            <p>
              Participated in an event
            </p>
          </section>
        </div>
      </div>
    </div>

    <div class="large-6 columns">
      <div class="row">
        <div class="large-1 columns pictogram">
          <div class="pict-icon large pic"></div>
        </div>
        <div class="large-11 columns">
          <div class="row">
            <div class="large-4 columns profile-image">
              <img id="profiles-view-avatar"
                   src="{{ pageuser|get_avatar_url(128) }}">
            </div>
            <div class="large-8 columns smallmap-profile-container">
              <div id="map" class="smallmap-profile">
                <img src="{{ get_static_map_url(256, 128, user_profile.lon, user_profile.lat, 1) }}"/>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <!-- Campaign participated in -->
    <div class="large-6 columns">
      <div class="row report-box">
        <div class="large-1 columns">
        </div>
        <section class="large-11 columns report-item">
          <h4>Campaign</h4>
          <p>
            Completed a WebMaker challenge
          </p>
        </section>
      </div>
      <!-- Activity Date -->
      <div class="row report-box">
        <div class="large-1 columns">
          <div class="pict-icon large time"></div>
        </div>
        <section class="large-11 columns report-item">
          <h4>Date of activity</h4>
          <time pubdate="YYYY-MM-DD">YYYY-MM-DD</time>
        </section>
      </div>
    </div>

    <!-- Contribution Location -->
    <div class="large-6 columns">
      <div class="row report-box">
        <div class="large-1 columns">
          <div class="pict-icon large pin"></div>
        </div>
        <section class="large-11 columns report-item">
          <h4>Contribution location</h4>
          <p>
            Newcastle upon Tyne, United Kingdom
          </p>
        </section>
      </div>
      <!-- URL Link -->
      <div class="row report-box">
        <div class="large-1 columns">
          <div class="pict-icon large www"></div>
        </div>
        <section class="large-11 columns report-item">
          <h4>URL for activity</h4>
          <p>
            <a href="http://www.example.com">http://www.example.com</a>
          </p>
        </section>
      </div>
    </div>
  </div>

  <div class="row">
    <!-- Contribution Areas -->
    <div class="large-6 columns">
      <div class="row report-box">
          <div class="large-1 columns">
            <div class="pict-icon large heart"></div>
          </div>
          <section class="large-11 columns report-item">
            <h4>Contribution areas</h4>
            <ul class="contribution-areas">
              <li>Accessibility</li>
              <li>Addons</li>
              <li>Apps</li>
            </ul>
          </section>
      </div>
    </div>
    <!-- Description -->
    <div class="large-6 columns">
      <div class="row report-box">
        <div class="large-1 columns">
          <div class="pict-icon large edit"></div>
        </div>
        <section class="large-11 columns report-item">
          <h4>Description of activity</h4>
          <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
          </p>
        </section>
      </div>
    </div>

  </div>

  {% if editable %}
    <!-- Edit report -->
    <div class="row">
      <div class="large-12 columns align-right show-for-small">
        <a href="{{ report|get_report_edit_url }}"
           class="small button">Edit report</a>
      </div>
    </div>
  {% endif %}

  <!-- Comments -->
  {% if report.reportcomment_set.count() > 0 or user.is_authenticated() %}
    <div class="row">
      <div class="large-12 columns">
        <div class="row report-box">
          <div class="columns comment-icon">
            <div class="pict-icon large talk"></div>
          </div>
          <div class="columns report-item comment-item">
            {% for comment in report.reportcomment_set.all() %}
              <div class="report-comment">
                {% if perms.reports.can_delete_report_comments %}
                  <form method="post" action="{{ comment|get_comment_delete_url }}">
                    {{ csrf() }}
                    <button type="submit" class="report-delete-comment">&#215;</button>
                  </form>
                {% endif %}
                <span class="label inline">
                  Comment {{ loop.index }}
                </span>
                <span class="grayed">by </span>
                {% if user_is_mozillian(comment.user) %}
                  {{ comment.user.get_full_name() }}
                {% else %}
                  <a href="{{ url('profiles_view_profile', comment.user|get_display_name) }}">
                    {{ comment.user.get_full_name() }}
                  </a>
                {% endif %}
                <span class="grayed"
                      data-time="{{ comment.created_on|format_datetime_iso }}"
                      title="{{ comment.created_on }}">
                  at {{ comment.created_on }}
                </span><br>
                {{ comment.comment }}
              </div>
            {% endfor %}
            {% if user.is_authenticated() %}
              <div id="report-comment-post">
                <form method="post" actions="{{ report_comment_form_url }}"
                      class="custom">
                  {{ csrf() }}
                  <textarea name="comment" class="flat"
                            placeholder="Add comment to this report"></textarea>
                  <div id="post-comment" class="align-right">
                    <button type="submit" class="small button">
                      Post comment
                    </button>
                  </div>
                </form>
              </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  {% endif %}
</main>
{% endblock %}

{% block bottomextra %}
  {% compress js %}
    <script src="{{ static('reports/js/profiles_view_report.js') }}"></script>
  {% endcompress %}
{% endblock %}
